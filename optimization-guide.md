#!/bin/bash

echo "üöÄ IOU Tracker APK Size Optimization Guide"
echo "============================================"
echo ""

echo "‚úÖ Applied Optimizations:"
echo "1. ‚úì Removed unused dependencies (react-native-table-component, react-native-worklets)"
echo "2. ‚úì Added Metro config with bundle optimization" 
echo "3. ‚úì Enhanced Proguard rules for code shrinking"
echo "4. ‚úì Enabled Android build optimizations"
echo "5. ‚úì Disabled unnecessary features (GIF, WebP)"
echo "6. ‚úì Reduced architecture targets to ARM only"
echo "7. ‚úì Configured EAS build for optimized APK"
echo ""

echo "üìä Expected Size Reduction:"
echo "‚Ä¢ Before: ~211MB"
echo "‚Ä¢ After: ~80-120MB (60-80% reduction expected)"
echo ""

echo "üîß Build Commands:"
echo "# Clean and rebuild:"
echo "npm run android -- --reset-cache"
echo "npx expo run:android --clear"
echo ""
echo "# Production build:"
echo "eas build --platform android --profile production"
echo ""
echo "# Preview build (smaller, faster):"
echo "eas build --platform android --profile preview"
echo ""

echo "üí° Additional Manual Optimizations:"
echo ""
echo "1. Image Optimization:"
echo "   ‚Ä¢ Compress PNG/JPG images in assets/images/"
echo "   ‚Ä¢ Use WebP format for better compression"
echo "   ‚Ä¢ Remove unused @2x, @3x variants if not needed"
echo ""

echo "2. Code Splitting:"
echo "   ‚Ä¢ Consider lazy loading screens with React.lazy()"
echo "   ‚Ä¢ Split large utility files into smaller modules"
echo ""

echo "3. Dependency Analysis:"
echo "   ‚Ä¢ Run: npx react-native-bundle-visualizer"
echo "   ‚Ä¢ Look for large unused libraries"
echo ""

echo "4. Further Reductions:"
echo "   ‚Ä¢ Use App Bundle (.aab) instead of APK:"
echo "     eas build --platform android --profile production-aab"
echo "   ‚Ä¢ Enable Play App Signing for dynamic delivery"
echo ""

echo "‚ö†Ô∏è  Important Notes:"
echo "‚Ä¢ Test thoroughly after optimization"
echo "‚Ä¢ Some features may need additional configuration"
echo "‚Ä¢ Hermes is enabled for better performance"
echo "‚Ä¢ Proguard will obfuscate code (keep debug symbols for crashes)"
echo ""

echo "üéØ Next Steps:"
echo "1. Build with: eas build --platform android --profile preview"
echo "2. Test APK size and functionality"
echo "3. If satisfied, use production profile"
echo "4. Consider App Bundle for Play Store submission"